<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description"
		content="Legacy's End - Master clean, portable, and maintainable frontend architecture through an epic RPG adventure. Learn Web Components, Signals, Dependency Injection, and modern web patterns.">
	<meta name="theme-color" content="#1a1a2e">

	<!-- Resource Hints for Performance -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

	<!-- Open Graph / Social Media -->
	<meta property="og:title" content="Legacy's End - Web Architecture RPG">
	<meta property="og:description"
		content="Master clean, portable, and maintainable frontend architecture through gaming">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://jorgecasar.github.io/legacys-end/">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Legacy's End">
	<meta name="twitter:description" content="Learn web architecture through an epic RPG adventure">

	<title>Legacy's End - Web Architecture RPG</title>

	<!-- Preload critical font to reduce CLS while keeping typography -->
	<link rel="preload" href="https://fonts.gstatic.com/s/pressstart2p/v16/e3t4euO8T-267oIAQAu6jDQyK3nVivNm4I81.woff2"
		as="font" type="font/woff2" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
	<style>
		html,
		body {
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
	</style>
	<script>
		// Restore SPA route from query parameter (GitHub Pages SPA trick)
		(() => {
			const query = window.location.search;
			if (query.startsWith('?p=')) {
				const path = decodeURIComponent(query.slice(3).split('&')[0]);
				// Restore with base path
				const fullPath = `/legacys-end${path}`;
				window.history.replaceState(null, '', fullPath);
			}
		})();

		// Register Service Worker for caching (solves GitHub Pages cache policy)
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/legacys-end/sw.js')
					.then(() => console.log('✅ Service Worker registered'))
					.catch(err => console.warn('❌ SW registration failed:', err));
			});
		}
	</script>
</head>

<body class="">
	<legacys-end-app></legacys-end-app>
	<script type="module" src="/src/main.js"></script>
</body>

</html>